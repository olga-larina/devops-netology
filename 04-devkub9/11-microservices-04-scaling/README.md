
# Домашнее задание к занятию "11.04 Микросервисы: масштабирование"

Вы работаете в крупной компанию, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps специалисту необходимо выдвинуть предложение по организации инфраструктуры, для разработки и эксплуатации.

## Задача 1: Кластеризация

Предложите решение для обеспечения развертывания, запуска и управления приложениями.
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:
- Поддержка контейнеров;
- Обеспечивать обнаружение сервисов и маршрутизацию запросов;
- Обеспечивать возможность горизонтального масштабирования;
- Обеспечивать возможность автоматического масштабирования;
- Обеспечивать явное разделение ресурсов доступных извне и внутри системы;
- Обеспечивать возможность конфигурировать приложения с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных таких как пароли, ключи доступа, ключи шифрования и т.п.

Обоснуйте свой выбор.

### Ответ
Сравнительная таблица. [Источник](https://mcs.mail.ru/blog/sravnenie-kubernetes-s-drugimi-resheniyami)

| Продукт                                                  | Kubernetes                                   | Docker Swarm | Nomad                                                              | Apache Mesos (+ Maraphon, Aurora)        |
|----------------------------------------------------------|----------------------------------------------|--------------|--------------------------------------------------------------------|------------------------------------------|
| Поддержка контейнеров                                    | +                                            | +            | +                                                                  | +                                        |
| Шаблонизатор                                             | + (Helm)                                     | -            | -                                                                  | + (но Helm мощнее)                       |
| Возможность обнаружения сервисов                         | + (встроенный DNS-сервер)                    | +            | +- (нет Autodiscovery на основе DNS, нужно использовать Consul)    | +                                        |
| Горизонтальное масштабирование                           | + (HPA)                                      | +            | +                                                                  | +                                        |
| Автомасштабирование                                      | + (Cluster Autoscaler)                       | -            | +                                                                  | +- (в комбинации с Maraphon)             |
| Явное разделение ресурсов                                | +                                            | -            | +                                                                  | +                                        |
| Возможность конфигурации, хранения чувствительных данных | + (сетевые политики, пространства имен и тп) | +            | +- (нужно использовать Vault, в Enterprise версии есть namespaces) | +- (в основном лучше использовать Vault) |

Систему нужно выбирать исходя из предполагаемых задач.  
- Docker Swarm - лучше в небольших проектах, где предпочтение отдаётся простоте и быстроте разработки.  
Ниже порог входа, быстрее разворачивать. 
Но нет автомасштабирования, меньше инструментарий и возможности администрирования.  
- Nomad - для небольших / средних команд, при сочетании контейнеров и нет.  
Прост в установке и эксплуатации, различные виды рабочих нагрузок.  
Но ограниченный функционал, несущественная поддержка сообществом.  
- Apache Mesos - для масштабных проектов, при сочетании контейнеров и нет.  
Высокая масштабируемость, поддержка контейнерных и неконтейнерных приложений.  
Но сложность администрирования, несущественная поддержка сообществом.  
- Kubernetes - для платформ корпоративного уровня с тысячами контейнеров.  
Коробочный инструмент оркестровки, множество возможностей и функций, большое сообщество, бесплатный с открытым исходным кодом.  
Но сложно настраивать, только для контейнеров, поддержка меньшего количества узлов по сравнению с Nomad и Mesos.  

В целом, наиболее предпочтительным выглядит Kubernetes, т.к. предоставляет наиболее широкий спектр возможностей.


## Задача 2: Распределенный кэш * (необязательная)

Разработчикам вашей компании понадобился распределенный кэш для организации хранения временной информации по сессиям пользователей.
Вам необходимо построить Redis Cluster состоящий из трех шард с тремя репликами.

### Схема:

[Ссылка](https://user-images.githubusercontent.com/1122523/114282923-9b16f900-9a4f-11eb-80aa-61ed09725760.png)

![11-04-01](img/1.png)

---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
