# Olga Ivanova, devops-10. Домашнее задание к занятию "5.2. Системы управления виртуализацией"

## Задача 1

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

- 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований  
  Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных 
  и автоматизированного механизма создания резервных копий
- Требуется наиболее производительное бесплатное opensource решение для виртуализации небольшой (20 серверов) инфраструктуры Linux и 
  Windows виртуальных машин
- Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры
- Необходимо рабочее окружение для тестирование программного продукта на нескольких дистрибутивах Linux

Ответ:  
1) Скорее всего, Hyper-V. Идеально подходит для Windows-based архитектуры, т.к. продукт Microsoft. Виртуальные машины на Linux тоже можно настроить.
   Широкий функционал, низкий порог вхождения для инженеров.  
2) KVM, т.к. производительный и гибкий, бесплатный, opensource. Можно и XEN для большей стабильности, но производительность будет меньше.  
3) Самый совместимый с Windows - это Hyper-V (как продукт Microsoft). Насколько я понимаю, у него тоже есть бесплатное решение.  
4) KVM или XEN - opensource, бесплатные, производительные (XEN немного меньше, но для тестирования большего и не требуется). 
Тем более, что KVM - нативный для большинства современных ядер Linux.

## Задача 2

Опишите сценарий миграции с VMware vSphere на Hyper-V для Linux и Windows виртуальных машин. 
Детально опишите необходимые шаги для использования всех преимуществ Hyper-V для Windows.

Ответ:  
Нашла на сайте Microsoft инструкцию - [Ссылка](https://docs.microsoft.com/ru-ru/system-center/vmm/vm-convert-vmware?view=sc-vmm-2019)
Можно мигрировать с помощью мастера "Преобразовать виртуальную машину" в структуре Virtual Machine Manager.
По факту нужно выбрать источник, задать конфигурацию, выбрать узел Hyper-V и сети, добавить свойства.
Вот [здесь](https://docs.microsoft.com/ru-ru/system-center/vmm/vm-settings?view=sc-vmm-2019) описано, как настраивать параметры в структуре вычисления VMM:
- виртуальный адаптер
- магистральный режим
- статическая память
- период обслуживания
- рабочая контрольная точка
- параметры доступности для кластеризованных виртуальных машин
- регулирование ресурсов, процессора, памяти

## Задача 3

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) 
и что необходимо сделать для минимизации этих рисков и проблем. 
Если бы у вас был бы выбор, то создавали ли вы бы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

Ответ:  
Проблемы гетерогенной среды:  
- сложность поддержки и администрирования
- необходимо больше инженеров (либо их обучение нескольким системам)
- финансовые издержки (нужно содержать несколько систем, особенно если они платные)
- сложность масштабирования
- при разворачивании одних и тех же приложений в разных системах (например, дев и прод контуры) будет требоваться дополнительная специальная настройка

Для минимизации возможно:
- использовать по возможности минимальное количество систем управления
- подбирать наиболее подходящие системы (например, Hyper-V для Windows и т.п.)
- обучать инженеров имеющимся системам

Думаю, что теоретически лучше использовать одну систему. Но мне кажется, что обычно в компаниях бывает и Linux, и Windows.  
Windows - для AD, бухгалтерии и т.п. А Linux - для различных приложений. Поэтому в данном случае, наверное, лучше их разграничить.
Например, для Windows использовать Hyper-V, а для Linux - KVM.